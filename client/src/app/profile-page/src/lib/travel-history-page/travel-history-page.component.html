<div class="parent">
  <div class="centered">
    <h1 class="mat-headline-2 text-centered">Travel History</h1>
    <ng-template *ngIf="state.loading">
      <mat-spinner></mat-spinner>
    </ng-template>

    <mat-accordion *ngIf="trips.length > 0; else errorMessage">
      <mat-expansion-panel *ngFor="let trip of trips; let i=index">
        <mat-expansion-panel-header>
          <button class="number-btn" mat-mini-fab color="accent">
            {{i+1}}
          </button>
          <div>
            <mat-panel-title>
              Trip {{i+1}}
            </mat-panel-title>
            <mat-panel-description>
              {{trip.tripEndDate | date: 'dd/MM/yyyy HH:mm'}}
            </mat-panel-description>
          </div>
        </mat-expansion-panel-header>
        <mat-stepper orientation="vertical" #stepper>
          <mat-step *ngFor="let route of trip.routeStations" completed="false">
            <ng-template matStepLabel>{{route.mediumName}} {{route.departureTime | date: 'dd/MM/yyyy HH:mm'}}</ng-template>
          </mat-step>
        </mat-stepper>
      </mat-expansion-panel>
    </mat-accordion>
    <ng-template #errorMessage>
      <p class="mat-headline-5 text-centered">{{state.error}}</p>
      <div class="button-container">
        <button routerLink="/game" class="play-btn" color="accent" mat-raised-button>
          <mat-icon>play_arrow</mat-icon>
          Start new trip
        </button>
      </div>
    </ng-template>
  </div>
</div>
